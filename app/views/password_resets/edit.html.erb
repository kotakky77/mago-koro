<% provide(:title, "まごころおくりもの - パスワード再設定") %>
<% content_for :head do %>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<% end %>

<header>
  <div class="container">
    <div class="nav-menu">
      <%= link_to "まごころおくりもの", root_path, class: "logo" %>
    </div>
  </div>
</header>

<main>
  <div class="login-container">
    <h1 class="login-title">パスワード再設定</h1>
    
    <p style="margin-bottom: 20px; text-align: center;">
      新しいパスワードを設定してください。
    </p>
    
    <%= form_with(model: @user, url: password_reset_path(params[:id]), 
                  local: true, id: "password-reset-confirm-form", 
                  class: "login-form", data: { validate: true }) do |f| %>
      <%= hidden_field_tag :email, params[:email] %>
      
      <% if @user.errors.any? %>
        <div class="alert alert-danger">
          <ul style="margin: 0; padding-left: 20px;">
            <% @user.errors.full_messages.each do |error| %>
              <li><%= error %></li>
            <% end %>
          </ul>
        </div>
      <% end %>
      
      <div class="form-group">
        <%= f.label :password, "新しいパスワード" %>
        <%= f.password_field :password, class: 'form-control', required: true %>
        <small style="color: #757575;">※8文字以上で英数字を含めてください</small>
      </div>
      
      <div class="form-group">
        <%= f.label :password_confirmation, "パスワード（確認）" %>
        <%= f.password_field :password_confirmation, class: 'form-control', required: true %>
      </div>
      
      <div class="form-group">
        <%= f.submit "パスワードを変更する", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</main>

<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-links">
        <a href="#">利用規約</a>
        <a href="#">プライバシーポリシー</a>
        <a href="#">お問い合わせ</a>
      </div>
      <div class="copyright">
        &copy; 2025 まごころおくりもの All Rights Reserved.
      </div>
    </div>
  </div>
</footer>
